# 一些常用库的国内镜像

## npm-JavaScript

使用阿里云的镜像

```shell
npm config set registry https://registry.npmmirror.com
```

## cargo-Rust

使用字节跳动的镜像

`~/.cargo/config`

```shell
[source.crates-io]
# To use sparse index, change 'rsproxy' to 'rsproxy-sparse'
replace-with = 'rsproxy'

[source.rsproxy]
registry = "https://rsproxy.cn/crates.io-index"
[source.rsproxy-sparse]
registry = "sparse+https://rsproxy.cn/index/"

[registries.rsproxy]
index = "https://rsproxy.cn/crates.io-index"

[net]
git-fetch-with-cli = true
```

`rustup`

```shell
export RUSTUP_DIST_SERVER="https://rsproxy.cn"
export RUSTUP_UPDATE_ROOT="https://rsproxy.cn/rustup"
```

## flutter

```shell
# flutter 本身的地址
export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn
# flutter 依赖包的地址
export PUB_HOSTED_URL=https://pub.flutter-io.cn
```

## homebrew

使用中科大的镜像

```shell
export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles
```

## gradle

使用阿里云的镜像

`~/.gradle/init.gradle`

```gradle
allprojects {
    repositories {
        def ALIYUN_REPOSITORY_URL = 'https://maven.aliyun.com/repository/public'
        def ALIYUN_GOOGLE_URL = 'https://maven.aliyun.com/repository/google'
        all { ArtifactRepository repo ->
            if(repo instanceof MavenArtifactRepository){
                def url = repo.url.toString()
                if (url.startsWith('https://repo1.maven.org/maven2') || url.startsWith('https://jcenter.bintray.com') || url.startsWith('https://repo.maven.apache.org/maven2/')) {
                    project.logger.lifecycle "Repository ${repo.url} replaced by $ALIYUN_REPOSITORY_URL."
                    remove repo
                } else if (url.startsWith('https://dl.google.com/dl/android/maven2') || url.startsWith('https://maven.google.com')) {
                    project.logger.lifecycle "Repository ${repo.url} replaced by $ALIYUN_GOOGLE_URL."
                    remove repo
                } else {
                    project.logger.lifecycle "Repository ${repo.url} replaced by None."
                }
            }
        }
        maven { url ALIYUN_REPOSITORY_URL }
        maven { url ALIYUN_GOOGLE_URL }
    }
}
```

如果用了其他仓库，可以查看日志，然后到 [阿里云云效 Maven 官网](https://developer.aliyun.com/mvn/guide) 查看并替换
